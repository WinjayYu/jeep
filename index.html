<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content='text/html;charset=utf-8' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no,address=no" />
    <title>Jeep K8大指挥官</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">
    <style type="text/css">
        /*.loading {*/
            /*background: url('images/loading.gif') no-repeat 50% 20%;*/
            /*background-size: 60%;*/
            /*background-color: #1b1d1c;*/
        /*}*/
        .spritespin-instance {
            margin: 0px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <!--<div class="logo"><span>Jeep K8大指挥官</span></div>-->
            <div class="menu">
                <span class="menu_item">换色</span><span class="menu_item">轮毂</span><span class="menu_item">配置</span>
            </div>
            <div class="outside_sub_menu">
                <div class="sub_menu clear">
                    <div class="sub_menu_wrap">
                        <span carcolor="blue_summit" class="sub_menu_item col blue active_item" data-url="./images/1.jpg">地中海蓝</span>
                        <span carcolor="black_limited" class="sub_menu_item col black" data-url="./images/2.jpg">北极黑</span>
                        <span carcolor="red_summit" class="sub_menu_item col red" data-url="./images/3.jpg">波尔多红</span>
                        <span carcolor="brown_overland" class="sub_menu_item col brown" data-url="./images/4.jpg">阿布扎比棕</span>
                    </div>
                    <div class="show_more">
                        <img src="./images/CombinedShape.png" alt="">
                    </div>
                </div>
                <div class="sub_menu clear">
                    <div class="sub_menu_wrap">
                        <span class="sub_menu_item active_item" data-url="./images/3.jpg">轮毂1</span>
                        <span class="sub_menu_item" data-url="./images/4.jpg">轮毂2</span>
                        <span class="sub_menu_item" data-url="./images/5.jpg">轮毂3</span>
                    </div>
                    <div class="show_more">
                        <img src="./images/CombinedShape.png" alt="">
                    </div>
                </div>
                <div class="sub_menu clear">
                    <div class="sub_menu_wrap">
                        <span class="sub_menu_item active_item" data-url="./images/5.jpg">行政外观</span>
                        <span class="sub_menu_item" data-url="./images/6.jpg">发动机</span>
                        <span class="sub_menu_item" data-url="./images/7.jpg">变速箱</span>
                        <span class="sub_menu_item" data-url="./images/8.jpg">油耗</span>
                        <span class="sub_menu_item" data-url="./images/9.jpg">人性化科技</span>
                        <span class="sub_menu_item" data-url="./images/9.jpg">核心技术</span>
                    </div>
                    <div class="show_more">
                        <img src="./images/CombinedShape.png" alt="">
                    </div>
                </div>
            </div>

        </div>
        <div class="header inner_head">
            <!--<div class="logo"><span>Jeep K8大指挥官</span></div>-->
            <div class="menu">
                <span class="menu_item">换色</span><span class="menu_item">配置</span><span class="menu_item">视角</span>
            </div>
            <div class="outside_sub_menu">
                <div class="sub_menu clear">
                    <div class="sub_menu_wrap">
                        <span carcolor="blue_summit" class="sub_menu_item col blue active_item" data-url="./images/1.jpg">地中海蓝</span>
                        <span carcolor="black_limited" class="sub_menu_item col black" data-url="./images/2.jpg">北极黑</span>
                        <span carcolor="red_summit" class="sub_menu_item col red" data-url="./images/3.jpg">波尔多红</span>
                        <span carcolor="brown_overland" class="sub_menu_item col brown" data-url="./images/4.jpg">阿布扎比棕</span>

                    </div>
                    <div class="show_more">
                        <img src="./images/CombinedShape.png" alt="">
                    </div>
                </div>
                <div class="sub_menu clear">
                    <div class="sub_menu_wrap">
                        <span class="sub_menu_item active_item" data-url="./images/3.jpg">方向盘</span>
                        <span class="sub_menu_item" data-url="./images/4.jpg">仪表盘</span>
                        <span class="sub_menu_item" data-url="./images/5.jpg">安全座椅</span>
                    </div>
                    <div class="show_more">
                        <img src="./images/CombinedShape.png" alt="">
                    </div>
                </div>
                <div class="sub_menu clear">
                    <div class="sub_menu_wrap">
                        <span class="sub_menu_item active_item" data-url="./images/5.jpg">驾驶位视角</span>
                        <span class="sub_menu_item" data-url="./images/6.jpg">中排视角</span>
                        <span class="sub_menu_item" data-url="./images/7.jpg">后排视角</span>
                    </div>
                    <div class="show_more">
                        <img src="./images/CombinedShape.png" alt="">
                    </div>
                </div>
            </div>

        </div>

        <div class="content">
            <!--<img src="./images/0.jpg" alt="" class="car">-->
            <div id="360ShowContent"></div>
            <iframe id="VRShowContent" frameborder="0" class="vr_content"></iframe>
            <div class="describe">
                <p class="des_title">赛道级 2.0T 旗舰动力</p>
                <p class="des_content">
                    FCA 集团全新一代2.0T发动机，同级别最强升功率/升扭矩（汽油机罕见达到
                    200N·m），欧洲进口技术+满足欧六排放标准，全新正时系统、全铝结构、众多高科技加持
                </p>
            </div>
            <div class="reserve lightSpeedIn">立即预定</div>
            <img src="./images/circulation.png" alt="" class="circulation">
        </div>
        <div onclick="Switchover(this)" id="SwitchoverBtn" class="footer">点击进入内饰页</div>
    </div>
    <div class="loading_wrap">
        <img src="./images/loading.gif" alt="" class="loading">
    </div>
    <div class="boxLoading"></div>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/spritespin.min.js"></script>
    <script>
        //默认选择蓝色
        var SelectedCarColor = "blue_summit";
        var $innerHead = $('.inner_head');
        var $head = $('.header');
        var $boxLoading = $('.boxLoading');

        $(document).ready(function () {
            var $menuItem = $('.menu_item');
            var $subMenu = $('.sub_menu');
            var $subMenuItem = $('.sub_menu_item');
            var $car = $('.car');
            var index = 1;
            var lastIndex = 1;
            var num = 60;
            var speed = 50;
            var $SwitchoverBtn = $('#SwitchoverBtn');

            // 顶上menu切换
            $menuItem.on('click', function (e) {
                e.stopPropagation();
                var $me = $(this);
                var idx = $me.index();
                $menuItem.removeClass('active_menu');
                $me.addClass('active_menu');
                if($SwitchoverBtn.text() == '点击进入外观页') {
                  idx = idx + 3;
                }
                $subMenu.removeClass('active_sub_menu');
                $subMenu.eq(idx).addClass('active_sub_menu');


            });
            // 二级菜单
            $subMenuItem.on('click', function (e) {
                e.stopPropagation();
                $boxLoading.show();
                var $me = $(this);
                $subMenuItem.removeClass('active_item');
                $me.addClass('active_item');
                $car.attr('src', $me.data('url'));
                if ($me.text() === '发动机') {
                    $('.describe').show();
                } else {
                    $('.describe').hide();
                }
                //判断是否是颜色的选择
                if ($me.attr("carcolor") != undefined) {
                    SelectedCarColor = $me.attr("carcolor");
                    AutoSwitchover();
                }
            });
            //加载默认颜色的360
            AutoSwitchover();
            //$car.on('mousedown touchstart', function (e) {
            //    "mousedown" == e.type && e.preventDefault();
            //    e = e || window.event;
            //    document.body.style.cursor = 'w-resize';
            //    //记录当前按下的位置
            //    var startX = e.clientX || e.originalEvent.touches[0].pageX;
            //    $car.on('mousemove touchmove', function (evt) {
            //        "mousemove" == evt.type && evt.preventDefault();
            //        evt = evt || window.event;

            //        var dis = evt.clientX || evt.originalEvent.touches[0].pageX - startX;

            //        index = Math.floor(dis / speed) % num + lastIndex;


            //        if (index < 0) {
            //            index = index % num + num;

            //        } else if (index >= num) {
            //            index = index % num;
            //        }

            //        lastIndex = index;

            //        $car.attr('src', 'images/' + index + '.jpg');
            //    })
            //}).on("mouseup touchend", function (e) {
            //    "mouseup" == e.type && e.preventDefault();
            //    $car.off('mousemove touchmove');
            //})
            //var images = new Array();
            //for (var i = 0; i < 61; i++) {
            //    images[i] = new Image();
            //    images[i].src = 'https://cdn.upchina.com/HXSmartInvestmentH5/jeep/images/' + i + '.jpg';
            //}
        })
        function Load360(color) {
            $("#VRShowContent").hide();
            $("#360ShowContent").show();
            var width = $('.container').width();
            var height = window.screen.availHeight;
            var frames = SpriteSpin.sourceArray('./images/K8_360_comp_lm_' + color + '_v001/K8_360_comp_lm_' + color + '_v001__{frame}.jpg', { frame: [0, 60], digits: 5 });
            $("#360ShowContent").spritespin({
                width: width,
                height: height,
                behavior: "drag",
                module: "360",
                sense: -1,
                source: frames,
                animate: false
            });
            $('.loading_wrap').hide();
            $boxLoading.hide();
        }
        function LoadCR(color) {
            $("#VRShowContent").show();
            $("#360ShowContent").hide();
            var width = $('.container').width();
//            var width = window.screen.availWidth;
            var height = window.screen.availHeight;
            $("#VRShowContent").css("height", (height-118)+"px");
            $("#VRShowContent").attr("src", "./vr/K8_360_comp_lm_" + color + "_v001/index.html");
            $('.container').css('height', $('iframe').height() + 64 + 'px');

        }
        function Switchover(obj) {
            if ($(obj).text() == "点击进入内饰页") {
                $(obj).text("点击进入外观页");
                //内饰
                LoadCR(SelectedCarColor);

                $head.hide();
                $innerHead.show();
            } else {
                $(obj).text("点击进入内饰页");
                //外观
                Load360(SelectedCarColor);

                $innerHead.hide();
                $head.show();
            }
        }
        function AutoSwitchover() {
            if ($("#SwitchoverBtn").text() == "点击进入内饰页") {
                Load360(SelectedCarColor);
            } else {
                LoadCR(SelectedCarColor);
            }
        }
    </script>
</body>
</html>